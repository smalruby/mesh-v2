{
 "Resources": {
  "MeshV2Table4D15C8B1": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi_pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi_sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "GroupIdIndex",
      "KeySchema": [
       {
        "AttributeName": "gsi_pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi_sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": false
    },
    "TableName": "MeshV2Table-stg2",
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "ResourceType",
      "Value": "DynamoDB"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ],
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Table/Resource"
   }
  },
  "MeshV2ApiApiLogsRole0A4AE3EA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "ResourceType",
      "Value": "GraphQLAPI"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/ApiLogsRole/Resource"
   }
  },
  "MeshV2Api20DEA996": {
   "Type": "AWS::AppSync::GraphQLApi",
   "Properties": {
    "AuthenticationType": "API_KEY",
    "EnvironmentVariables": {
     "TABLE_NAME": {
      "Ref": "MeshV2Table4D15C8B1"
     }
    },
    "LogConfig": {
     "CloudWatchLogsRoleArn": {
      "Fn::GetAtt": [
       "MeshV2ApiApiLogsRole0A4AE3EA",
       "Arn"
      ]
     },
     "ExcludeVerboseContent": false,
     "FieldLogLevel": "ALL"
    },
    "Name": "MeshV2Api-stg2",
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "ResourceType",
      "Value": "GraphQLAPI"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ],
    "XrayEnabled": true
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/Resource"
   }
  },
  "MeshV2ApiSchema23F7B8FC": {
   "Type": "AWS::AppSync::GraphQLSchema",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "Definition": "# --- データの基本構造 ---\n\ninput SensorDataInput {\n  key: String!\n  value: String!\n}\n\ntype SensorData {\n  key: String!\n  value: String!\n}\n\n# --- 主要エンティティ ---\n\ntype Group {\n  id: ID!           # group_id部分のみ\n  domain: String!   # domain部分（グローバルIP or 任意文字列、最大256文字）\n  fullId: String!   # {group_id}@{domain}の完全なID\n  name: String!\n  hostId: ID!\n  createdAt: AWSDateTime!\n  expiresAt: AWSDateTime!\n}\n\ntype Node {\n  id: ID!\n  name: String!\n  groupId: ID\n  domain: String    # 所属しているdomain\n}\n\ntype NodeStatus {\n  nodeId: ID!\n  groupId: ID!\n  domain: String!\n  data: [SensorData!]!\n  timestamp: AWSDateTime!\n}\n\ntype Event {\n  name: String!\n  firedByNodeId: ID!\n  groupId: ID!\n  domain: String!\n  payload: String\n  timestamp: AWSDateTime!\n}\n\ntype GroupDissolvePayload {\n  groupId: ID!\n  domain: String!\n  message: String!\n}\n\ntype HeartbeatPayload {\n  groupId: ID!\n  domain: String!\n  expiresAt: AWSDateTime!\n}\n\ntype LeaveGroupPayload {\n  peerId: ID!\n  groupId: ID!\n  domain: String!\n  message: String!\n}\n\n# --- クエリ (Queries) ---\n\ntype Query {\n  # Domain内のグループ一覧取得（スキャン機能）\n  listGroupsByDomain(domain: String!): [Group!]!\n\n  # グループ取得\n  getGroup(groupId: ID!, domain: String!): Group\n\n  # NodeStatus取得\n  getNodeStatus(nodeId: ID!): NodeStatus\n\n  # グループ内の全NodeStatus取得\n  listGroupStatuses(groupId: ID!, domain: String!): [NodeStatus!]!\n\n  # グループ内の全Node取得\n  listNodesInGroup(groupId: ID!, domain: String!): [Node!]!\n}\n\n# --- ミューテーション (Mutations) ---\n\ntype Mutation {\n  # ドメイン管理\n  # リクエスト元のソースIPからドメインを生成する\n  createDomain: String!\n\n  # グループ管理\n  createGroup(\n    name: String!\n    hostId: ID!\n    domain: String!\n  ): Group!\n\n  joinGroup(\n    groupId: ID!\n    domain: String!\n    nodeId: ID!\n  ): Node!\n\n  leaveGroup(\n    groupId: ID!\n    domain: String!\n    nodeId: ID!\n  ): LeaveGroupPayload\n\n  # Note: nullableにすることでSubscription型と一致させる\n  dissolveGroup(\n    groupId: ID!\n    domain: String!\n    hostId: ID!\n  ): GroupDissolvePayload\n\n  # ハートビート更新\n  renewHeartbeat(\n    groupId: ID!\n    domain: String!\n    hostId: ID!\n  ): HeartbeatPayload!\n\n  # データ通信\n  # Note: nullableにすることでSubscription型と一致させる\n  reportDataByNode(\n    groupId: ID!\n    domain: String!\n    nodeId: ID!\n    data: [SensorDataInput!]!\n  ): NodeStatus\n\n  # Note: nullableにすることでSubscription型と一致させる\n  fireEventByNode(\n    groupId: ID!\n    domain: String!\n    nodeId: ID!\n    eventName: String!\n    payload: String\n  ): Event\n}\n\n# --- サブスクリプション (Subscriptions) ---\n\ntype Subscription {\n  # グループ内のデータ更新を購読\n  # reportDataByNode mutation がトリガー\n  # Note: nullableにすることで、NodeStatusが存在しない場合でもエラーを防ぐ\n  onDataUpdateInGroup(groupId: ID!, domain: String!): NodeStatus\n    @aws_subscribe(mutations: [\"reportDataByNode\"])\n\n  # グループ内のイベントを購読\n  # fireEventByNode mutation がトリガー\n  # Note: nullableにすることで、Eventが存在しない場合でもエラーを防ぐ\n  onEventInGroup(groupId: ID!, domain: String!): Event\n    @aws_subscribe(mutations: [\"fireEventByNode\"])\n\n  # グループ解散通知を購読\n  # dissolveGroup mutation がトリガー\n  # Note: nullableにすることで、GroupDissolvePayloadが存在しない場合でもエラーを防ぐ\n  onGroupDissolve(groupId: ID!, domain: String!): GroupDissolvePayload\n    @aws_subscribe(mutations: [\"dissolveGroup\"])\n}\n\nschema {\n  query: Query\n  mutation: Mutation\n  subscription: Subscription\n}\n"
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/Schema"
   }
  },
  "MeshV2ApiDefaultApiKey8F5AB9AD": {
   "Type": "AWS::AppSync::ApiKey",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "Expires": 1798300503
   },
   "DependsOn": [
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/DefaultApiKey"
   }
  },
  "MeshV2ApiLogRetentionE29901E0": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/appsync/apis/",
       {
        "Fn::GetAtt": [
         "MeshV2Api20DEA996",
         "ApiId"
        ]
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/LogRetention/Resource"
   }
  },
  "MeshV2ApiMeshV2TableDataSourceServiceRole9494A293": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "ResourceType",
      "Value": "GraphQLAPI"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource/ServiceRole/Resource"
   }
  },
  "MeshV2ApiMeshV2TableDataSourceServiceRoleDefaultPolicyB25A1197": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "MeshV2Table4D15C8B1",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "MeshV2Table4D15C8B1",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "MeshV2ApiMeshV2TableDataSourceServiceRoleDefaultPolicyB25A1197",
    "Roles": [
     {
      "Ref": "MeshV2ApiMeshV2TableDataSourceServiceRole9494A293"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "MeshV2ApiMeshV2TableDataSource4B09CCD7": {
   "Type": "AWS::AppSync::DataSource",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "DynamoDBConfig": {
     "AwsRegion": {
      "Ref": "AWS::Region"
     },
     "TableName": {
      "Ref": "MeshV2Table4D15C8B1"
     }
    },
    "Name": "MeshV2TableDataSource",
    "ServiceRoleArn": {
     "Fn::GetAtt": [
      "MeshV2ApiMeshV2TableDataSourceServiceRole9494A293",
      "Arn"
     ]
    },
    "Type": "AMAZON_DYNAMODB"
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource/Resource"
   }
  },
  "MeshV2ApiListGroupsByDomainResolver748B0B99": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/a98855d572b71d419093e8c58b31b8de900a9dd8a94fe4d0791bd11aeb10ce0d.js"
    },
    "DataSourceName": "MeshV2TableDataSource",
    "FieldName": "listGroupsByDomain",
    "Kind": "UNIT",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    },
    "TypeName": "Query"
   },
   "DependsOn": [
    "MeshV2ApiMeshV2TableDataSource4B09CCD7",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/ListGroupsByDomainResolver/Resource"
   }
  },
  "MeshV2ApiGetGroupResolverC5B22909": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/4da8582e76491a2fda705976c18d496ae859c2af9e5505f3e0bfd67e7c3d1ccb.js"
    },
    "DataSourceName": "MeshV2TableDataSource",
    "FieldName": "getGroup",
    "Kind": "UNIT",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    },
    "TypeName": "Query"
   },
   "DependsOn": [
    "MeshV2ApiMeshV2TableDataSource4B09CCD7",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/GetGroupResolver/Resource"
   }
  },
  "MeshV2ApiListGroupStatusesResolverF8C4ECD1": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/229976d5f90b8c5618dd62305b75ace81349e4d3d1e7a6cd8185174b103fd22a.js"
    },
    "DataSourceName": "MeshV2TableDataSource",
    "FieldName": "listGroupStatuses",
    "Kind": "UNIT",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    },
    "TypeName": "Query"
   },
   "DependsOn": [
    "MeshV2ApiMeshV2TableDataSource4B09CCD7",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/ListGroupStatusesResolver/Resource"
   }
  },
  "MeshV2ApiJoinGroupResolverB66CA9CF": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/14b8cae057c9ea5d2dc6da6e31f2d5a111cf7200490dad55ebb6899bed9b0e1c.js"
    },
    "DataSourceName": "MeshV2TableDataSource",
    "FieldName": "joinGroup",
    "Kind": "UNIT",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    },
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "MeshV2ApiMeshV2TableDataSource4B09CCD7",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/JoinGroupResolver/Resource"
   }
  },
  "MeshV2ApiNoneDataSource73E5019C": {
   "Type": "AWS::AppSync::DataSource",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "Name": "NoneDataSource",
    "Type": "NONE"
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/NoneDataSource/Resource"
   }
  },
  "MeshV2ApiDissolveGroupDataSourceServiceRole0B5CFD1A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "ResourceType",
      "Value": "GraphQLAPI"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource/ServiceRole/Resource"
   }
  },
  "MeshV2ApiDissolveGroupDataSourceServiceRoleDefaultPolicy4D30AF72": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "DissolveGroupFunction1FF67E55",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "DissolveGroupFunction1FF67E55",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "MeshV2ApiDissolveGroupDataSourceServiceRoleDefaultPolicy4D30AF72",
    "Roles": [
     {
      "Ref": "MeshV2ApiDissolveGroupDataSourceServiceRole0B5CFD1A"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "MeshV2ApiDissolveGroupDataSource73D6C415": {
   "Type": "AWS::AppSync::DataSource",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "LambdaConfig": {
     "LambdaFunctionArn": {
      "Fn::GetAtt": [
       "DissolveGroupFunction1FF67E55",
       "Arn"
      ]
     }
    },
    "Name": "DissolveGroupDataSource",
    "ServiceRoleArn": {
     "Fn::GetAtt": [
      "MeshV2ApiDissolveGroupDataSourceServiceRole0B5CFD1A",
      "Arn"
     ]
    },
    "Type": "AWS_LAMBDA"
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource/Resource"
   }
  },
  "MeshV2ApiDissolveGroupResolver561B1280": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "DataSourceName": "DissolveGroupDataSource",
    "FieldName": "dissolveGroup",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "MeshV2ApiDissolveGroupDataSource73D6C415",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/DissolveGroupResolver/Resource"
   }
  },
  "MeshV2ApiCreateDomainResolverD6C35A88": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "DataSourceName": "DissolveGroupDataSource",
    "FieldName": "createDomain",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "MeshV2ApiDissolveGroupDataSource73D6C415",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/CreateDomainResolver/Resource"
   }
  },
  "MeshV2ApiLeaveGroupResolverAE4E12A0": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "DataSourceName": "DissolveGroupDataSource",
    "FieldName": "leaveGroup",
    "Kind": "UNIT",
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "MeshV2ApiDissolveGroupDataSource73D6C415",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/MeshV2Api/LeaveGroupResolver/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:DeleteRetentionPolicy",
        "logs:PutRetentionPolicy"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "Roles": [
     {
      "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Handler": "index.handler",
    "Runtime": "nodejs22.x",
    "Timeout": 900,
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "2819175352ad1ce0dae768e83fc328fb70fb5f10b4a8ff0ccbcb791f02b0716d.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      "Arn"
     ]
    },
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ]
   },
   "DependsOn": [
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource",
    "aws:asset:path": "asset.2819175352ad1ce0dae768e83fc328fb70fb5f10b4a8ff0ccbcb791f02b0716d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CheckExistingGroupFunctionA9C8920C": {
   "Type": "AWS::AppSync::FunctionConfiguration",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/137858bc89bdddab459f544965eb7a9286b7c091a239d4196ab9041cd44c8279.js"
    },
    "DataSourceName": "MeshV2TableDataSource",
    "FunctionVersion": "2018-05-29",
    "Name": "checkExistingGroup",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    }
   },
   "DependsOn": [
    "MeshV2ApiMeshV2TableDataSource4B09CCD7",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/CheckExistingGroupFunction/Resource"
   }
  },
  "CreateGroupIfNotExistsFunctionDF6A729F": {
   "Type": "AWS::AppSync::FunctionConfiguration",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/3204655b374094e843e1cc14cd9ec18d4c69af08ad8dd1f8e5a030e12af7b6a0.js"
    },
    "DataSourceName": "MeshV2TableDataSource",
    "FunctionVersion": "2018-05-29",
    "Name": "createGroupIfNotExists",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    }
   },
   "DependsOn": [
    "MeshV2ApiMeshV2TableDataSource4B09CCD7",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/CreateGroupIfNotExistsFunction/Resource"
   }
  },
  "CreateGroupPipelineResolver01EC028E": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "Code": "\n        // Pipeline resolver: pass through\n        export function request(ctx) {\n          return {};\n        }\n        export function response(ctx) {\n          return ctx.prev.result;\n        }\n      ",
    "FieldName": "createGroup",
    "Kind": "PIPELINE",
    "PipelineConfig": {
     "Functions": [
      {
       "Fn::GetAtt": [
        "CheckExistingGroupFunctionA9C8920C",
        "FunctionId"
       ]
      },
      {
       "Fn::GetAtt": [
        "CreateGroupIfNotExistsFunctionDF6A729F",
        "FunctionId"
       ]
      }
     ]
    },
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    },
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/CreateGroupPipelineResolver/Resource"
   }
  },
  "CheckGroupExistsFunction42209DD4": {
   "Type": "AWS::AppSync::FunctionConfiguration",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/8da1aff29614012bc363ce9cb4f2f387342346515934d2d79c73d3a57588cca4.js"
    },
    "DataSourceName": "MeshV2TableDataSource",
    "FunctionVersion": "2018-05-29",
    "Name": "checkGroupExists",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    }
   },
   "DependsOn": [
    "MeshV2ApiMeshV2TableDataSource4B09CCD7",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/CheckGroupExistsFunction/Resource"
   }
  },
  "RenewHeartbeatFunctionF34374A9": {
   "Type": "AWS::AppSync::FunctionConfiguration",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/dda8c6eb465743fe7a0b188f954a707976f5d633faef3a71d31a24a1647c2df2.js"
    },
    "DataSourceName": "MeshV2TableDataSource",
    "FunctionVersion": "2018-05-29",
    "Name": "renewHeartbeatFunction",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    }
   },
   "DependsOn": [
    "MeshV2ApiMeshV2TableDataSource4B09CCD7",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/RenewHeartbeatFunction/Resource"
   }
  },
  "RenewHeartbeatResolver5161BB7A": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "Code": "\n        // Pipeline resolver: pass through\n        export function request(ctx) {\n          return {};\n        }\n        export function response(ctx) {\n          return ctx.prev.result;\n        }\n      ",
    "FieldName": "renewHeartbeat",
    "Kind": "PIPELINE",
    "PipelineConfig": {
     "Functions": [
      {
       "Fn::GetAtt": [
        "CheckGroupExistsFunction42209DD4",
        "FunctionId"
       ]
      },
      {
       "Fn::GetAtt": [
        "RenewHeartbeatFunctionF34374A9",
        "FunctionId"
       ]
      }
     ]
    },
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    },
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/RenewHeartbeatResolver/Resource"
   }
  },
  "ReportDataByNodeFunction49EBCA29": {
   "Type": "AWS::AppSync::FunctionConfiguration",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/6f419e5a024c93b92fbf553ea2b3cbacb8719f4315a9f0b1ae27ff97c75620fc.js"
    },
    "DataSourceName": "MeshV2TableDataSource",
    "FunctionVersion": "2018-05-29",
    "Name": "reportDataByNode",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    }
   },
   "DependsOn": [
    "MeshV2ApiMeshV2TableDataSource4B09CCD7",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/ReportDataByNodeFunction/Resource"
   }
  },
  "ReportDataByNodePipelineResolver633134E5": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "Code": "\n        // Pipeline resolver: pass through\n        export function request(ctx) {\n          return {};\n        }\n        export function response(ctx) {\n          return ctx.prev.result;\n        }\n      ",
    "FieldName": "reportDataByNode",
    "Kind": "PIPELINE",
    "PipelineConfig": {
     "Functions": [
      {
       "Fn::GetAtt": [
        "CheckGroupExistsFunction42209DD4",
        "FunctionId"
       ]
      },
      {
       "Fn::GetAtt": [
        "ReportDataByNodeFunction49EBCA29",
        "FunctionId"
       ]
      }
     ]
    },
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    },
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/ReportDataByNodePipelineResolver/Resource"
   }
  },
  "FireEventByNodeFunctionD1403F51": {
   "Type": "AWS::AppSync::FunctionConfiguration",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "CodeS3Location": {
     "Fn::Sub": "s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/22dbb70ea5bb167b7c8d10ff21bb36bd37e2a31eb8a73d4d8431876606dd7a97.js"
    },
    "DataSourceName": "NoneDataSource",
    "FunctionVersion": "2018-05-29",
    "Name": "fireEventByNode",
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    }
   },
   "DependsOn": [
    "MeshV2ApiNoneDataSource73E5019C",
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/FireEventByNodeFunction/Resource"
   }
  },
  "FireEventByNodePipelineResolverE4FE3019": {
   "Type": "AWS::AppSync::Resolver",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "MeshV2Api20DEA996",
      "ApiId"
     ]
    },
    "Code": "\n        // Pipeline resolver: pass through\n        export function request(ctx) {\n          return {};\n        }\n        export function response(ctx) {\n          return ctx.prev.result;\n        }\n      ",
    "FieldName": "fireEventByNode",
    "Kind": "PIPELINE",
    "PipelineConfig": {
     "Functions": [
      {
       "Fn::GetAtt": [
        "CheckGroupExistsFunction42209DD4",
        "FunctionId"
       ]
      },
      {
       "Fn::GetAtt": [
        "FireEventByNodeFunctionD1403F51",
        "FunctionId"
       ]
      }
     ]
    },
    "Runtime": {
     "Name": "APPSYNC_JS",
     "RuntimeVersion": "1.0.0"
    },
    "TypeName": "Mutation"
   },
   "DependsOn": [
    "MeshV2ApiSchema23F7B8FC"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/FireEventByNodePipelineResolver/Resource"
   }
  },
  "DissolveGroupFunctionServiceRole0E4AA602": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/DissolveGroupFunction/ServiceRole/Resource"
   }
  },
  "DissolveGroupFunctionServiceRoleDefaultPolicy47FB7715": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "MeshV2Table4D15C8B1",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "MeshV2Table4D15C8B1",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DissolveGroupFunctionServiceRoleDefaultPolicy47FB7715",
    "Roles": [
     {
      "Ref": "DissolveGroupFunctionServiceRole0E4AA602"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/DissolveGroupFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DissolveGroupFunction1FF67E55": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "3bd05ab0daa71711abd5e14807d7615dc0ba77215bae876717e094b494faa167.zip"
    },
    "Environment": {
     "Variables": {
      "DYNAMODB_TABLE_NAME": {
       "Ref": "MeshV2Table4D15C8B1"
      },
      "MESH_SECRET_KEY": "uXM1VAA6MO39yJ+djz4kbpVGy3Rg1V3Z"
     }
    },
    "FunctionName": "MeshV2-DissolveGroup-stg2",
    "Handler": "handlers/appsync_handler.lambda_handler",
    "Role": {
     "Fn::GetAtt": [
      "DissolveGroupFunctionServiceRole0E4AA602",
      "Arn"
     ]
    },
    "Runtime": "ruby3.4",
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "DissolveGroupFunctionServiceRoleDefaultPolicy47FB7715",
    "DissolveGroupFunctionServiceRole0E4AA602"
   ],
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/DissolveGroupFunction/Resource",
    "aws:asset:path": "asset.3bd05ab0daa71711abd5e14807d7615dc0ba77215bae876717e094b494faa167",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DissolveGroupFunctionLogGroup6986B309": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DissolveGroupFunction1FF67E55"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "MeshV2"
     },
     {
      "Key": "Service",
      "Value": "AppSync"
     },
     {
      "Key": "Stage",
      "Value": "stg2"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/DissolveGroupFunction/LogGroup/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/+1WX2/bNhD/LOVjwahbsofCb0riBUG8zrW8AoURGCfyLF9CkRpJudEEffeBlOXISZeX7KFF+yCIvDveP/J+d6fJ6dlp8usb+OJOhLw/UZQnbeZB3HP44tatbDSURuZJu4Rc4aplPvw/QIlswt4yziqwnjwZfYMNm7RMP7J8U4VlxjrOnLH+ZYmclCJd/GFkIM3Tz+v5dLFeTD/+Nc2WjDOLpdmBmhtFomETJtF5a5rggiHtr/WSSlygMDu0TVahoA0JCJ4Fo1+RmeoQimSTDSiHHWeeSlyaGe0w9d5SXvvez463DKS8UiYHlaEwWoJtrrXEBzZZtYzCapwSa+5QBMvLPr50NmPdbXfLLzY65rHjUFWu0SJpryxU279VWtHqKDUSN6Spdz8SoPZbY+mfGNKF0RsqQmASN1Arn465gX4kPvgxv17fTD8HZRXdYPOoBR8qsuj6cLuOM9Q7skaXqP0nsBScdntHHiw85s7bGjlTpnjUtSFUcmaKGe5Q7aPnDB+EqiV+QpsbhxdGe9R+yP0+w9PnRtlkFY2+Zbd7oUxssYRLrFBL1OEprH5yfwBurJ5YLR9naUWjXX8iENL4rPllRK3L/BI8ZKa2AgNztFugM2qHNpAP6w9G40hmBmUuYURI+5L9vdaxto/LFSoaCvdwYk+wtQ7Ist+JHt96VPmp4LUK4qsYrqTHoNpGzOs4QZm0CxPbFjhXlyjPYweqLGlBFahUCFMHGOrNR5lwIBUH4B2waWnmw6mhBa3arn+03oPYXmtFGg+8w4t+kfmy3tdwv8d4vye98eGF3PGeHNvUoG5pAueZledkKTMPHkPHc0dX+1ry/+bNt6fo6+R4H/1VdFyZwiXtzBQLDGMGGc1npriypq5WbZhW4vIwsvWHB4mOu7M1OIfeJWn4cXeWnNfiHv05OFzdchVbQ9KOWsFmvxyNgceQtQUtFdqnAHY0aQ1TMZVoaj+ePadjoacT0X8wj6Cx62LTC4g6SDz9ovyfta9qP/TFvu+FHGQeCtJFx7WRmNy5d7vT35L3yS9v7hzRyT7UZNH//wWe/SAiVgwAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "MeshV2Stack-stg2/CDKMetadata/Default"
   },
   "Condition": "CDKMetadataAvailable"
  }
 },
 "Outputs": {
  "TableName": {
   "Description": "DynamoDB table name for Mesh v2",
   "Value": {
    "Ref": "MeshV2Table4D15C8B1"
   }
  },
  "TableArn": {
   "Description": "DynamoDB table ARN for Mesh v2",
   "Value": {
    "Fn::GetAtt": [
     "MeshV2Table4D15C8B1",
     "Arn"
    ]
   }
  },
  "GraphQLApiEndpoint": {
   "Description": "AppSync GraphQL API endpoint",
   "Value": {
    "Fn::GetAtt": [
     "MeshV2Api20DEA996",
     "GraphQLUrl"
    ]
   }
  },
  "GraphQLApiKey": {
   "Description": "AppSync API Key",
   "Value": {
    "Fn::GetAtt": [
     "MeshV2ApiDefaultApiKey8F5AB9AD",
     "ApiKey"
    ]
   }
  },
  "GraphQLApiId": {
   "Description": "AppSync GraphQL API ID",
   "Value": {
    "Fn::GetAtt": [
     "MeshV2Api20DEA996",
     "ApiId"
    ]
   }
  }
 },
 "Conditions": {
  "CDKMetadataAvailable": {
   "Fn::Or": [
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "af-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-3"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-4"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-northwest-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-2"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "il-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "sa-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-1"
       ]
      }
     ]
    },
    {
     "Fn::Equals": [
      {
       "Ref": "AWS::Region"
      },
      "us-west-2"
     ]
    }
   ]
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}