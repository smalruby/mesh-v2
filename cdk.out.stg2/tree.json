{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.232.1"},"children":{"MeshV2Stack-stg2":{"id":"MeshV2Stack-stg2","path":"MeshV2Stack-stg2","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"MeshV2Table":{"id":"MeshV2Table","path":"MeshV2Stack-stg2/MeshV2Table","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[{"tableName":"*","partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"destroy","pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":false},"timeToLiveAttribute":"*"},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL"}]}]},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Table/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"},{"attributeName":"gsi_pk","attributeType":"S"},{"attributeName":"gsi_sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GroupIdIndex","keySchema":[{"attributeName":"gsi_pk","keyType":"HASH"},{"attributeName":"gsi_sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":false},"tableName":"MeshV2Table-stg2","tags":[{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"MeshV2"},{"key":"ResourceType","value":"DynamoDB"},{"key":"Service","value":"AppSync"},{"key":"Stage","value":"stg2"}],"timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"MeshV2Stack-stg2/MeshV2Table/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":["*"]}}}},"TableName":{"id":"TableName","path":"MeshV2Stack-stg2/TableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"TableArn":{"id":"TableArn","path":"MeshV2Stack-stg2/TableArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"MeshV2Api":{"id":"MeshV2Api","path":"MeshV2Stack-stg2/MeshV2Api","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.232.1","metadata":[{"name":"*","definition":"*","authorizationConfig":{"defaultAuthorization":{"authorizationType":"API_KEY","apiKeyConfig":{"expires":"*"}}},"environmentVariables":"*","xrayEnabled":true,"logConfig":{"fieldLogLevel":"ALL","excludeVerboseContent":false}},{"addEnvironmentVariable":["*","*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]},{"addSchemaDependency":["*"]}]},"children":{"ApiLogsRole":{"id":"ApiLogsRole","path":"MeshV2Stack-stg2/MeshV2Api/ApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportApiLogsRole":{"id":"ImportApiLogsRole","path":"MeshV2Stack-stg2/MeshV2Api/ApiLogsRole/ImportApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":["*"]}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/ApiLogsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"]]}],"tags":[{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"MeshV2"},{"key":"ResourceType","value":"GraphQLAPI"},{"key":"Service","value":"AppSync"},{"key":"Stage","value":"stg2"}]}}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"authenticationType":"API_KEY","environmentVariables":{"TABLE_NAME":{"Ref":"MeshV2Table4D15C8B1"}},"logConfig":{"cloudWatchLogsRoleArn":{"Fn::GetAtt":["MeshV2ApiApiLogsRole0A4AE3EA","Arn"]},"excludeVerboseContent":false,"fieldLogLevel":"ALL"},"name":"MeshV2Api-stg2","tags":[{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"MeshV2"},{"key":"ResourceType","value":"GraphQLAPI"},{"key":"Service","value":"AppSync"},{"key":"Stage","value":"stg2"}],"xrayEnabled":true}}},"Schema":{"id":"Schema","path":"MeshV2Stack-stg2/MeshV2Api/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"definition":"# --- データの基本構造 ---\n\ninput SensorDataInput {\n  key: String!\n  value: String!\n}\n\ntype SensorData {\n  key: String!\n  value: String!\n}\n\n# --- 主要エンティティ ---\n\ntype Group {\n  id: ID!           # group_id部分のみ\n  domain: String!   # domain部分（グローバルIP or 任意文字列、最大256文字）\n  fullId: String!   # {group_id}@{domain}の完全なID\n  name: String!\n  hostId: ID!\n  createdAt: AWSDateTime!\n  expiresAt: AWSDateTime!\n}\n\ntype Node {\n  id: ID!\n  name: String!\n  groupId: ID\n  domain: String    # 所属しているdomain\n}\n\ntype NodeStatus {\n  nodeId: ID!\n  groupId: ID!\n  domain: String!\n  data: [SensorData!]!\n  timestamp: AWSDateTime!\n}\n\ntype Event {\n  name: String!\n  firedByNodeId: ID!\n  groupId: ID!\n  domain: String!\n  payload: String\n  timestamp: AWSDateTime!\n}\n\ntype GroupDissolvePayload {\n  groupId: ID!\n  domain: String!\n  message: String!\n}\n\ntype HeartbeatPayload {\n  groupId: ID!\n  domain: String!\n  expiresAt: AWSDateTime!\n}\n\ntype LeaveGroupPayload {\n  peerId: ID!\n  groupId: ID!\n  domain: String!\n  message: String!\n}\n\n# --- クエリ (Queries) ---\n\ntype Query {\n  # Domain内のグループ一覧取得（スキャン機能）\n  listGroupsByDomain(domain: String!): [Group!]!\n\n  # グループ取得\n  getGroup(groupId: ID!, domain: String!): Group\n\n  # NodeStatus取得\n  getNodeStatus(nodeId: ID!): NodeStatus\n\n  # グループ内の全NodeStatus取得\n  listGroupStatuses(groupId: ID!, domain: String!): [NodeStatus!]!\n\n  # グループ内の全Node取得\n  listNodesInGroup(groupId: ID!, domain: String!): [Node!]!\n}\n\n# --- ミューテーション (Mutations) ---\n\ntype Mutation {\n  # ドメイン管理\n  # リクエスト元のソースIPからドメインを生成する\n  createDomain: String!\n\n  # グループ管理\n  createGroup(\n    name: String!\n    hostId: ID!\n    domain: String!\n  ): Group!\n\n  joinGroup(\n    groupId: ID!\n    domain: String!\n    nodeId: ID!\n  ): Node!\n\n  leaveGroup(\n    groupId: ID!\n    domain: String!\n    nodeId: ID!\n  ): LeaveGroupPayload\n\n  # Note: nullableにすることでSubscription型と一致させる\n  dissolveGroup(\n    groupId: ID!\n    domain: String!\n    hostId: ID!\n  ): GroupDissolvePayload\n\n  # ハートビート更新\n  renewHeartbeat(\n    groupId: ID!\n    domain: String!\n    hostId: ID!\n  ): HeartbeatPayload!\n\n  # データ通信\n  # Note: nullableにすることでSubscription型と一致させる\n  reportDataByNode(\n    groupId: ID!\n    domain: String!\n    nodeId: ID!\n    data: [SensorDataInput!]!\n  ): NodeStatus\n\n  # Note: nullableにすることでSubscription型と一致させる\n  fireEventByNode(\n    groupId: ID!\n    domain: String!\n    nodeId: ID!\n    eventName: String!\n    payload: String\n  ): Event\n}\n\n# --- サブスクリプション (Subscriptions) ---\n\ntype Subscription {\n  # グループ内のデータ更新を購読\n  # reportDataByNode mutation がトリガー\n  # Note: nullableにすることで、NodeStatusが存在しない場合でもエラーを防ぐ\n  onDataUpdateInGroup(groupId: ID!, domain: String!): NodeStatus\n    @aws_subscribe(mutations: [\"reportDataByNode\"])\n\n  # グループ内のイベントを購読\n  # fireEventByNode mutation がトリガー\n  # Note: nullableにすることで、Eventが存在しない場合でもエラーを防ぐ\n  onEventInGroup(groupId: ID!, domain: String!): Event\n    @aws_subscribe(mutations: [\"fireEventByNode\"])\n\n  # グループ解散通知を購読\n  # dissolveGroup mutation がトリガー\n  # Note: nullableにすることで、GroupDissolvePayloadが存在しない場合でもエラーを防ぐ\n  onGroupDissolve(groupId: ID!, domain: String!): GroupDissolvePayload\n    @aws_subscribe(mutations: [\"dissolveGroup\"])\n}\n\nschema {\n  query: Query\n  mutation: Mutation\n  subscription: Subscription\n}\n"}}},"DefaultApiKey":{"id":"DefaultApiKey","path":"MeshV2Stack-stg2/MeshV2Api/DefaultApiKey","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnApiKey","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::ApiKey","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"expires":1798300503}}},"LogRetention":{"id":"LogRetention","path":"MeshV2Stack-stg2/MeshV2Api/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"MeshV2Stack-stg2/MeshV2Api/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"MeshV2TableDataSource":{"id":"MeshV2TableDataSource","path":"MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.DynamoDbDataSource","version":"2.232.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":["*"]}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"MeshV2"},{"key":"ResourceType","value":"GraphQLAPI"},{"key":"Service","value":"AppSync"},{"key":"Stage","value":"stg2"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MeshV2Table4D15C8B1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MeshV2Table4D15C8B1","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"MeshV2ApiMeshV2TableDataSourceServiceRoleDefaultPolicyB25A1197","roles":[{"Ref":"MeshV2ApiMeshV2TableDataSourceServiceRole9494A293"}]}}}}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/MeshV2TableDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"dynamoDbConfig":{"tableName":{"Ref":"MeshV2Table4D15C8B1"},"awsRegion":{"Ref":"AWS::Region"}},"name":"MeshV2TableDataSource","serviceRoleArn":{"Fn::GetAtt":["MeshV2ApiMeshV2TableDataSourceServiceRole9494A293","Arn"]},"type":"AMAZON_DYNAMODB"}}}}},"ListGroupsByDomainResolver":{"id":"ListGroupsByDomainResolver","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupsByDomainResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupsByDomainResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupsByDomainResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupsByDomainResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupsByDomainResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/a98855d572b71d419093e8c58b31b8de900a9dd8a94fe4d0791bd11aeb10ce0d.js"},"dataSourceName":"MeshV2TableDataSource","fieldName":"listGroupsByDomain","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"GetGroupResolver":{"id":"GetGroupResolver","path":"MeshV2Stack-stg2/MeshV2Api/GetGroupResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/MeshV2Api/GetGroupResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/MeshV2Api/GetGroupResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/MeshV2Api/GetGroupResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/GetGroupResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/4da8582e76491a2fda705976c18d496ae859c2af9e5505f3e0bfd67e7c3d1ccb.js"},"dataSourceName":"MeshV2TableDataSource","fieldName":"getGroup","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"ListGroupStatusesResolver":{"id":"ListGroupStatusesResolver","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupStatusesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupStatusesResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupStatusesResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupStatusesResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/ListGroupStatusesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/229976d5f90b8c5618dd62305b75ace81349e4d3d1e7a6cd8185174b103fd22a.js"},"dataSourceName":"MeshV2TableDataSource","fieldName":"listGroupStatuses","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"JoinGroupResolver":{"id":"JoinGroupResolver","path":"MeshV2Stack-stg2/MeshV2Api/JoinGroupResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/MeshV2Api/JoinGroupResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/MeshV2Api/JoinGroupResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/MeshV2Api/JoinGroupResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/JoinGroupResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/14b8cae057c9ea5d2dc6da6e31f2d5a111cf7200490dad55ebb6899bed9b0e1c.js"},"dataSourceName":"MeshV2TableDataSource","fieldName":"joinGroup","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Mutation"}}}}},"NoneDataSource":{"id":"NoneDataSource","path":"MeshV2Stack-stg2/MeshV2Api/NoneDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.NoneDataSource","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/NoneDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"name":"NoneDataSource","type":"NONE"}}}}},"DissolveGroupDataSource":{"id":"DissolveGroupDataSource","path":"MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.232.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":["*"]}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"MeshV2"},{"key":"ResourceType","value":"GraphQLAPI"},{"key":"Service","value":"AppSync"},{"key":"Stage","value":"stg2"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["DissolveGroupFunction1FF67E55","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DissolveGroupFunction1FF67E55","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"MeshV2ApiDissolveGroupDataSourceServiceRoleDefaultPolicy4D30AF72","roles":[{"Ref":"MeshV2ApiDissolveGroupDataSourceServiceRole0B5CFD1A"}]}}}}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/DissolveGroupDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["DissolveGroupFunction1FF67E55","Arn"]}},"name":"DissolveGroupDataSource","serviceRoleArn":{"Fn::GetAtt":["MeshV2ApiDissolveGroupDataSourceServiceRole0B5CFD1A","Arn"]},"type":"AWS_LAMBDA"}}}}},"DissolveGroupResolver":{"id":"DissolveGroupResolver","path":"MeshV2Stack-stg2/MeshV2Api/DissolveGroupResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/DissolveGroupResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"dataSourceName":"DissolveGroupDataSource","fieldName":"dissolveGroup","kind":"UNIT","typeName":"Mutation"}}}}},"CreateDomainResolver":{"id":"CreateDomainResolver","path":"MeshV2Stack-stg2/MeshV2Api/CreateDomainResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/CreateDomainResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"dataSourceName":"DissolveGroupDataSource","fieldName":"createDomain","kind":"UNIT","typeName":"Mutation"}}}}},"LeaveGroupResolver":{"id":"LeaveGroupResolver","path":"MeshV2Stack-stg2/MeshV2Api/LeaveGroupResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/MeshV2Api/LeaveGroupResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"dataSourceName":"DissolveGroupDataSource","fieldName":"leaveGroup","kind":"UNIT","typeName":"Mutation"}}}}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":["*"]}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"MeshV2"},{"key":"Service","value":"AppSync"},{"key":"Stage","value":"stg2"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"CheckExistingGroupFunction":{"id":"CheckExistingGroupFunction","path":"MeshV2Stack-stg2/CheckExistingGroupFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.232.1","metadata":[{"name":"*","api":"*","dataSource":"*","runtime":"*","code":"*"}]},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/CheckExistingGroupFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/CheckExistingGroupFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/CheckExistingGroupFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/CheckExistingGroupFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/137858bc89bdddab459f544965eb7a9286b7c091a239d4196ab9041cd44c8279.js"},"dataSourceName":"MeshV2TableDataSource","functionVersion":"2018-05-29","name":"checkExistingGroup","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"CreateGroupIfNotExistsFunction":{"id":"CreateGroupIfNotExistsFunction","path":"MeshV2Stack-stg2/CreateGroupIfNotExistsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.232.1","metadata":[{"name":"*","api":"*","dataSource":"*","runtime":"*","code":"*"}]},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/CreateGroupIfNotExistsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/CreateGroupIfNotExistsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/CreateGroupIfNotExistsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/CreateGroupIfNotExistsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/3204655b374094e843e1cc14cd9ec18d4c69af08ad8dd1f8e5a030e12af7b6a0.js"},"dataSourceName":"MeshV2TableDataSource","functionVersion":"2018-05-29","name":"createGroupIfNotExists","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"CreateGroupPipelineResolver":{"id":"CreateGroupPipelineResolver","path":"MeshV2Stack-stg2/CreateGroupPipelineResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/CreateGroupPipelineResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"code":"\n        // Pipeline resolver: pass through\n        export function request(ctx) {\n          return {};\n        }\n        export function response(ctx) {\n          return ctx.prev.result;\n        }\n      ","fieldName":"createGroup","kind":"PIPELINE","pipelineConfig":{"functions":[{"Fn::GetAtt":["CheckExistingGroupFunctionA9C8920C","FunctionId"]},{"Fn::GetAtt":["CreateGroupIfNotExistsFunctionDF6A729F","FunctionId"]}]},"runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Mutation"}}}}},"CheckGroupExistsFunction":{"id":"CheckGroupExistsFunction","path":"MeshV2Stack-stg2/CheckGroupExistsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.232.1","metadata":[{"name":"*","api":"*","dataSource":"*","runtime":"*","code":"*"}]},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/CheckGroupExistsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/CheckGroupExistsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/CheckGroupExistsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/CheckGroupExistsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/8da1aff29614012bc363ce9cb4f2f387342346515934d2d79c73d3a57588cca4.js"},"dataSourceName":"MeshV2TableDataSource","functionVersion":"2018-05-29","name":"checkGroupExists","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"RenewHeartbeatFunction":{"id":"RenewHeartbeatFunction","path":"MeshV2Stack-stg2/RenewHeartbeatFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.232.1","metadata":[{"name":"*","api":"*","dataSource":"*","runtime":"*","code":"*"}]},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/RenewHeartbeatFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/RenewHeartbeatFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/RenewHeartbeatFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/RenewHeartbeatFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/dda8c6eb465743fe7a0b188f954a707976f5d633faef3a71d31a24a1647c2df2.js"},"dataSourceName":"MeshV2TableDataSource","functionVersion":"2018-05-29","name":"renewHeartbeatFunction","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"RenewHeartbeatResolver":{"id":"RenewHeartbeatResolver","path":"MeshV2Stack-stg2/RenewHeartbeatResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/RenewHeartbeatResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"code":"\n        // Pipeline resolver: pass through\n        export function request(ctx) {\n          return {};\n        }\n        export function response(ctx) {\n          return ctx.prev.result;\n        }\n      ","fieldName":"renewHeartbeat","kind":"PIPELINE","pipelineConfig":{"functions":[{"Fn::GetAtt":["CheckGroupExistsFunction42209DD4","FunctionId"]},{"Fn::GetAtt":["RenewHeartbeatFunctionF34374A9","FunctionId"]}]},"runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Mutation"}}}}},"ReportDataByNodeFunction":{"id":"ReportDataByNodeFunction","path":"MeshV2Stack-stg2/ReportDataByNodeFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.232.1","metadata":[{"name":"*","api":"*","dataSource":"*","runtime":"*","code":"*"}]},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/ReportDataByNodeFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/ReportDataByNodeFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/ReportDataByNodeFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/ReportDataByNodeFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/6f419e5a024c93b92fbf553ea2b3cbacb8719f4315a9f0b1ae27ff97c75620fc.js"},"dataSourceName":"MeshV2TableDataSource","functionVersion":"2018-05-29","name":"reportDataByNode","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"ReportDataByNodePipelineResolver":{"id":"ReportDataByNodePipelineResolver","path":"MeshV2Stack-stg2/ReportDataByNodePipelineResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/ReportDataByNodePipelineResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"code":"\n        // Pipeline resolver: pass through\n        export function request(ctx) {\n          return {};\n        }\n        export function response(ctx) {\n          return ctx.prev.result;\n        }\n      ","fieldName":"reportDataByNode","kind":"PIPELINE","pipelineConfig":{"functions":[{"Fn::GetAtt":["CheckGroupExistsFunction42209DD4","FunctionId"]},{"Fn::GetAtt":["ReportDataByNodeFunction49EBCA29","FunctionId"]}]},"runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Mutation"}}}}},"FireEventByNodeFunction":{"id":"FireEventByNodeFunction","path":"MeshV2Stack-stg2/FireEventByNodeFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.232.1","metadata":[{"name":"*","api":"*","dataSource":"*","runtime":"*","code":"*"}]},"children":{"Code":{"id":"Code","path":"MeshV2Stack-stg2/FireEventByNodeFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/FireEventByNodeFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/FireEventByNodeFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/FireEventByNodeFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/22dbb70ea5bb167b7c8d10ff21bb36bd37e2a31eb8a73d4d8431876606dd7a97.js"},"dataSourceName":"NoneDataSource","functionVersion":"2018-05-29","name":"fireEventByNode","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"FireEventByNodePipelineResolver":{"id":"FireEventByNodePipelineResolver","path":"MeshV2Stack-stg2/FireEventByNodePipelineResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/FireEventByNodePipelineResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["MeshV2Api20DEA996","ApiId"]},"code":"\n        // Pipeline resolver: pass through\n        export function request(ctx) {\n          return {};\n        }\n        export function response(ctx) {\n          return ctx.prev.result;\n        }\n      ","fieldName":"fireEventByNode","kind":"PIPELINE","pipelineConfig":{"functions":[{"Fn::GetAtt":["CheckGroupExistsFunction42209DD4","FunctionId"]},{"Fn::GetAtt":["FireEventByNodeFunctionD1403F51","FunctionId"]}]},"runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Mutation"}}}}},"DissolveGroupFunction":{"id":"DissolveGroupFunction","path":"MeshV2Stack-stg2/DissolveGroupFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","environment":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MeshV2Stack-stg2/DissolveGroupFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MeshV2Stack-stg2/DissolveGroupFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":["*"]}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/DissolveGroupFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"MeshV2"},{"key":"Service","value":"AppSync"},{"key":"Stage","value":"stg2"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MeshV2Stack-stg2/DissolveGroupFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/DissolveGroupFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MeshV2Table4D15C8B1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MeshV2Table4D15C8B1","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"DissolveGroupFunctionServiceRoleDefaultPolicy47FB7715","roles":[{"Ref":"DissolveGroupFunctionServiceRole0E4AA602"}]}}}}}}},"Code":{"id":"Code","path":"MeshV2Stack-stg2/DissolveGroupFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MeshV2Stack-stg2/DissolveGroupFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MeshV2Stack-stg2/DissolveGroupFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/DissolveGroupFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"3bd05ab0daa71711abd5e14807d7615dc0ba77215bae876717e094b494faa167.zip"},"environment":{"variables":{"DYNAMODB_TABLE_NAME":{"Ref":"MeshV2Table4D15C8B1"},"MESH_SECRET_KEY":"uXM1VAA6MO39yJ+djz4kbpVGy3Rg1V3Z"}},"functionName":"MeshV2-DissolveGroup-stg2","handler":"handlers/appsync_handler.lambda_handler","role":{"Fn::GetAtt":["DissolveGroupFunctionServiceRole0E4AA602","Arn"]},"runtime":"ruby3.4","tags":[{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"MeshV2"},{"key":"Service","value":"AppSync"},{"key":"Stage","value":"stg2"}],"timeout":30}}},"LogGroup":{"id":"LogGroup","path":"MeshV2Stack-stg2/DissolveGroupFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.232.1","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"MeshV2Stack-stg2/DissolveGroupFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DissolveGroupFunction1FF67E55"}]]},"retentionInDays":731,"tags":[{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"MeshV2"},{"key":"Service","value":"AppSync"},{"key":"Stage","value":"stg2"}]}}}}}}},"GraphQLApiEndpoint":{"id":"GraphQLApiEndpoint","path":"MeshV2Stack-stg2/GraphQLApiEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"GraphQLApiKey":{"id":"GraphQLApiKey","path":"MeshV2Stack-stg2/GraphQLApiKey","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"GraphQLApiId":{"id":"GraphQLApiId","path":"MeshV2Stack-stg2/GraphQLApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"MeshV2Stack-stg2/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"MeshV2Stack-stg2/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}},"Condition":{"id":"Condition","path":"MeshV2Stack-stg2/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MeshV2Stack-stg2/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MeshV2Stack-stg2/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"}}}}}